---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "images/"
)
```

# speCluster

[![Project Status: WIP - Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](http://www.repostatus.org/badges/latest/wip.svg)](http://www.repostatus.org/#wip)

This package wraps the code at: 

https://github.com/cont-limno/SpectralClustering4Regions

## Installation

You can install speCluster from github with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("jsta/speCluster")
```

## Usage

### Load package

```{r eval=TRUE}
library(speCluster)
```

### Read data

```{r ,eval=TRUE}
dataTerr     <- read.csv("data-raw/terrData.csv", header = T)
dataFW       <- read.csv("data-raw/freshData.csv", header = T)
i <- which(colnames(dataFW) == "hu12_states")
dataTerrFW   <- merge(dataTerr, dataFW[-i], by.x = "zoneid", by.y = "zoneid")
islands      <- read.csv("data-raw/islandIdx.csv", header = T)
latLong18876 <- read.csv("data-raw/latLong18876.csv", header = T)
NB18876      <- read.csv("data-raw/NB_18876.csv", header = T)
```

### Prep Input

```{r prep input, eval=TRUE}
# generate the input when we restrict the
# data to dataTerrFW's of state Missouri, 
# and no islands inculded.
input <- generateData(type = dataTerrFW, islands = islands, 
                      latLong = latLong18876, NB18876, islandsIn = FALSE, 
                      states = c("MO"), conFactor = 1)
```

### Generate Clusters

```{r ,eval=TRUE}
results <- speCluster(data = input$data, conMatrix = input$conMatrix, 
                      cluster.number = 10)
summary(results)
results$SS
head(results$clusters)
mapping(lat = input$latLong[,1], long = input$latLong[,2],
         clusters = results$clusters)

```

## Citation

_Creating Multithemed Ecological Regions for Macroscale Ecology_ ([Cheruvelil et al. 2017](https://dx.doi.org/10.1002/ece3.2884))
